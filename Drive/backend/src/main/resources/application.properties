# HTTP
quarkus.http.port=8080
quarkus.http.cors.enabled=true
quarkus.http.cors.origins=http://localhost:3000,http://127.0.0.1:3000
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.methods=GET,POST,PATCH,PUT,DELETE,OPTIONS

# %dev.quarkus.http.auth.permission.options.paths=/*
# %dev.quarkus.http.auth.permission.options.methods=OPTIONS
# %dev.quarkus.http.auth.permission.options.policy=permit

# Security: require JWT for everything under /v1/*
quarkus.http.auth.permission.authenticated.paths=/v1/*
quarkus.http.auth.permission.authenticated.policy=authenticated

# JWT verification key file (project root)
mp.jwt.verify.publickey.location=https://cheerful-raccoon-70.clerk.accounts.dev/.well-known/jwks.json
mp.jwt.verify.publickey.algorithm=RS256
mp.jwt.verify.issuer=https://cheerful-raccoon-70.clerk.accounts.dev

quarkus.log.category."io.smallrye.jwt".level=DEBUG
quarkus.log.category."io.quarkus.security".level=DEBUG

# Datasource (Docker Postgres)
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=drive
quarkus.datasource.password=drive
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/drive

# Flyway migrations
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true

# Hibernate
quarkus.hibernate-orm.database.generation=validate

# S3 / MinIO
app.s3.bucket=drive-bucket
app.s3.endpoint=http://localhost:9000
app.s3.region=us-east-1
app.s3.access-key=minio
app.s3.secret-key=minio12345

# Multipart temp handling
quarkus.http.body.handle-file-uploads=true
quarkus.http.body.uploads-directory=uploads
quarkus.http.body.delete-uploaded-files-on-end=true

# Swagger UI in dev
quarkus.swagger-ui.always-include=true

# quarkus.http.limits.max-body-size=10G
# quarkus.http.limits.max-form-attribute-size=10G


# Mongo document service (mdb-service)
quarkus.rest-client.document-service.url=${DOC_SERVICE_URL:http://localhost:8081}

# Storage provider: s3 (MinIO) or azure (Azure Blob)
app.storage.provider=${APP_STORAGE_PROVIDER:s3}

# Azure Blob (used when provider=azure)
app.azure.blob.container=${AZURE_BLOB_CONTAINER:drive-files}
app.azure.blob.connection-string=${AZURE_STORAGE_CONNECTION_STRING:}
app.azure.blob.account-name=${AZURE_STORAGE_ACCOUNT_NAME:}
app.azure.blob.account-key=${AZURE_STORAGE_ACCOUNT_KEY:}
app.azure.blob.endpoint=${AZURE_BLOB_ENDPOINT:}
